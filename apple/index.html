<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    /* 动画1 */
    .animation1{
      font-size: 30px;
    }
    /* 动画2 */
    .animation2-wrapper{
      background-color: azure;
      padding: 20px;
      overflow: hidden;
    }
    .anima2 {
      --progress: 0;
      display: flex;
      opacity: var(--progress);
      transform: scale(calc(1.8 - (0.8 * var(--progress)))) translateY(calc(-60px * (1 - var(--progress))));
    }
    .anima2 > div{
      flex: 1;
      text-align: center;
      font-size: 50px;
    }
  </style>
</head>

<body>
  <div style="height: 50vh;"></div>
  <div class="animation1">这是一个二级标题这是一个二级标题这是一个二级标题这是一个二级标题这是一个二级标题这是一个二级标题这是一个二级标题</div>
  <div class="animation1">这是一个二级标题这是一个二级标题这是一个二级标题</div>
  <div class="animation1">这是一个二级标题这是一个二级标题这是一个二级标题</div>
  <div class="animation1">这是一个二级标题这是一个二级标题这是一个二级标题</div>
  <div class="animation2-wrapper">
    <div class="anima2">
      <div>自由</div>
      <div></div>
    </div>
    <div class="anima2">
      <div></div>
      <div>民主</div>
    </div>
    <div class="anima2">
      <div>自强</div>
      <div></div>
    </div>
  </div>
  <div style="height: 1600px;"></div>
</body>
<script>
  // ----------------------------动画1
  let animation1 = document.querySelectorAll('.animation1')
  // 视窗高度
  let clientHeight = document.documentElement.clientHeight
  // 开始动画的位置
  let animPosition = clientHeight/2 - 100

  // ----------------------------动画2
  //获取父元素
  let anima2Wrapper = document.querySelector('.animation2-wrapper');
  
  let a2List = document.querySelectorAll('.anima2')
  
  window.addEventListener('scroll', () => {
    // ---------------------------第一个动画效果
    for(let i=0; i<animation1.length;i++){
      if(animation1[i].getBoundingClientRect().top > animPosition - animation1[i].offsetHeight
      && animation1[i].getBoundingClientRect().top < animPosition){
        animation1[i].style.color = 'red'
      } else {
        animation1[i].style.color = '#000'
      }
    }
    
    // ----------------------------第二个动画
    // 距离视窗高度
    let a2WrapperTop = anima2Wrapper.getBoundingClientRect().top;
    if (a2WrapperTop <= animPosition
      && a2WrapperTop >= animPosition-anima2Wrapper.offsetHeight
    ) {
      let scrolled = (animPosition - a2WrapperTop) / anima2Wrapper.offsetHeight
      
      let total = 1 / a2List.length
      for (let index = 0; index < a2List.length; index++) {
        let row = a2List[index]
        let start = total * index
        let end = total * (index + 1)
        let progress = (scrolled - start) / (end - start)
        if (progress >= 1) progress = 1
        if (progress <= 0) progress = 0
        row.style.setProperty('--progress', progress)
      }
    }
  })


</script>

</html>